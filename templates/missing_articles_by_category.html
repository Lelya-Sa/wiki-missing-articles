<!DOCTYPE html>
{% load static %}
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Language & Category Selection</title>
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <div class="top-bar">
        <div class="top-left-container">
            <a href="/" title="Wikipedia Home">
                <img src="{% static 'images/Wikipedia_Globe_Logo.png' %}" alt="Wikipedia_Home_" class="wikipedia_up_left_globe_logo">
            </a>
            <a href="/" title="Wikipedia Home">
                <img src="{% static 'images/Wikipedia_Text_Logo.png' %}" alt="Wikipedia_Home" class="wikipedia_up_left_text_logo">
            </a>
        </div>
        <!-- Top-right Language Button -->
        <div class="top-right-container">  
            <div >
                <button id="language-search-button" class="search-button">
                <img src="{% static 'images/language_icon_blue.png' %}" alt="language icon" class="language_icon">
                Languages
            </button>
            </div>
            
            <!-- Language Search (Initially hidden) -->
            <div class="language-selector" id="language-selector">
                <label for="language-search"></label>
                <input 
                    type="text" 
                    id="language-search" 
                    placeholder="Search for a language..." 
                    autocomplete="off"
                >
                <ul id="language-list" class="language-list">
                    <!-- Suggestions will be dynamically populated -->
                </ul>
            </div>
        </div>
    </div>

<div class="central-left-container">
    <h2 align="center">Select Language and Category</h2>
    <p id="general-message" style="color: #367ee7; font-weight: bold; margin-top: 10px;">First enter a language then write your category</p>

    <br>
    <br>
    <form id="missing-articles-form">

        <label for="language"
               style="align-content: center;color: black;font-size: large">Select the language you want to use:</label>
        <!-- Language Search Bar -->
        <div class="article-language-selector" id="article-language-selector" style="align-content: center">
                <label for="article-language-search"></label>
                <input 
                    type="text" 
                    id="article-language-search" 
                    placeholder="Search languages..." 
                    autocomplete="off"
                />
                <ul id="article-language-list" class="article-language-list" role="listbox">
{#                <ul id="article-language-list" class="article-language-list" role="listitem">#}
                    <!-- Suggestions will be dynamically populated -->
                </ul>
        </div>

        <br>
        <br>

        <label for="comparing-language" style="align-content: center;color: black;font-size: large">Select the language you want to refer from:</label>
        <!-- reference Language Search Bar -->
        <div class="article-language-selector" id="article-refer-language-selector" style="align-content: center">
                <label for="article-refer-language-search"></label>
                <input
                    type="text"
                    id="article-refer-language-search"
                    placeholder="Search languages..."
                    autocomplete="off"
                />
                <ul id="article-refer-language-list" class="article-language-list" role="listbox">
{#                <ul id="article-language-list" class="article-language-list" role="listitem">#}
                    <!-- Suggestions will be dynamically populated -->
                </ul>
        </div>

        <div id="article-refer-language-spinner" style="display: none;">
            <img src="/static/images/spinner.gif" alt="language_spinner">
            Loading languages...
        </div>


        <p id="the_selected_refer_lang" style="color: #7c0808;"></p>
        <br>
        
        <!-- message -->
        <p id="category-message" style="color: #367ee7; font-weight: bold; margin-top: 10px; text-align: center">
            you can search the main categories or all categories in the selected language, 
            currently we are working on the second search which search all categories
        </p>
        
        <br>
        
        <!-- category Selector -->
        <label for="category" style="color: black;font-size: large">Select Main Category:</label>
        <div class="portal-selector" id="category-selector-class">

            <div id="category" class="portal-selector">
                <input
                    type="text"
                    id="category-search"
                    placeholder="Enter category name..."
                    autocomplete="off"
                />
                <ul id="category-list" class="category-list" role="listbox" aria-live="polite">
                    <!-- Suggestions dynamically populated -->
                </ul>
            </div>

{#            <div id="main-category-spinner" style="display: none;">Loading categories...</div>#}
            <div id="feedback-message" style="color: red; font-weight: bold; margin-top: 10px;"></div>

        <p id="response_data" style="color: #7c0808;"></p>
        </div>
                
        <br>
        <br>
            
        <!-- Portal Selector -->
{#        <label for="portals">Select Portal</label>#}
{#        <div class="portal-selector" id="portal-selector-class">#}
{#            <div id="portal-selector" class="portal-selector">#}
{#                <input #}
{#                    type="text" #}
{#                    id="portal-search" #}
{#                    placeholder="Enter portal name..." #}
{#                    autocomplete="off"#}
{#                >#}
{#                <ul id="portal-list" class="portal-list" role="listbox" aria-live="polite">#}
{#                    <!-- Suggestions dynamically populated -->#}
{#                </ul>#}
{#            </div>#}
{#        </div>#}
        
        <br>
        <br>
    <br>
        
        <p id="or-message" style="color: #367ee7; font-weight: bold; margin-top: 10px; text-align: center">
            OR
        </p>
    <!-- all category Selector -->
        <label for="all-category" style="color: black;font-size: large">Write a category name:</label>
        <div class="portal-selector" id="all-category-selector-class">
            <div id="all-category" class="portal-selector">
                <input 
                    type="text" 
                    id="all-category-search" 
                    placeholder="Enter category name..." 
                    autocomplete="off"
                />
                <ul id="all-category-list" class="portal-list">
                    <!-- Suggestions dynamically populated -->
                </ul>
            </div>
            
            <div id="all-category-spinner" style="display: none;">Loading categories...</div>
            <p id="all-cat-feedback-message" style="color: red; font-weight: bold; margin-top: 10px;"></p>
        
        <br>

        <p id="all-cat-response_data" style="color: #7c0808;"></p>
        </div>    
        
        
        <button type="submit">Submit</button>
    </form>
    
<br>
    
    <h2>all Articles in Selected Category in reference Language:</h2>
    <ul id="referArticles"></ul>
    <br>
    <br>
    <h2>Articles Missing in Selected Language:</h2>
    <ul id="articles"></ul>

    <br>
    <br>
    <br>
</div>

<script src="{% static 'js/category-search.js' %}" defer></script>
<script src="{% static 'js/language-selector.js' %}" defer></script>
<script src="{% static 'js/submission.js' %}" defer></script>
    
    <script>
        
        $(document).ready(function () {
    const portalSearch = $("#portal-search");

    // Check if the portal search field is visible
    console.log("Portal Search Visible:", portalSearch.is(":visible"));

    // Add a focus handler for debugging
    portalSearch.focus(function () {
        console.log("Portal search input is focused.");
    });

    // Example test log to ensure JS runs correctly
    console.log("Portal Selector Initialized!");
});

    </script>

</body>
</html>





